<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Summary - <%= order._id %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/main.css">
</head>
<body>
    <div class="container my-5">
        <div class="row">
            <div class="col-12">
                <h1>Order Summary</h1>
                <div class="card">
                    <div class="card-header">
                        <h5>Order #<%= order._id %></h5>
                        <span class="badge bg-<%= order.status === 'pending' ? 'warning' : 
                                        order.status === 'processing' ? 'info' :
                                        order.status === 'shipped' ? 'primary' :
                                        order.status === 'delivered' ? 'success' : 'danger' %>">
                            <%= order.status %>
                        </span>
                    </div>
                    <div class="card-body">
                        <p>Order Date: <%= new Date(order.createdAt).toLocaleString() %></p>
                        <p>Shipping Address:</p>
                        <address>
                            <%= order.shippingAddress.name %><br>
                            <%= order.shippingAddress.addressType %><br>
                            <%= order.shippingAddress.phone %><br>
                            <%= order.shippingAddress.landmark %><br>
                            <%= order.shippingAddress.city %>, <%= order.shippingAddress.state %> - <%= order.shippingAddress.pincode %>
                        </address>
                        <h5>Items</h5>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Quantity</th>
                                    <th>Price</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% orderItems.forEach(item => { %>
                                <tr>
                                  <td>
                                    <div class="d-flex align-items-center">
                                      <img
                                        src="<%= item.product.productImages[0] || '/images/placeholder.jpg' %>"
                                        alt="<%= item.product.productName %>"
                                        class="img-thumbnail me-2"
                                        style="width: 50px; height: 50px;"
                                      />
                                      <span><%= item.product.productName %></span>
                                    </div>
                                  </td>
                                  <td><%= item.quantity %></td>
                                  <td>₹<%= item.price %></td>
                                  <td>₹<%= item.totalPrice %></td>
                                </tr>
                                <% }); %>
                              </tbody>
                            
                        </table>
                        <div class="d-flex justify-content-end">
                            <div class="card w-50">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <span>Subtotal:</span>
                                        <span>₹<%= order.subtotal %></span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Shipping:</span>
                                        <span>₹<%= order.shippingCost %></span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Total:</span>
                                        <span>₹<%= order.total %></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <a href="/profile/orders" class="btn btn-secondary mt-3">Back to Orders</a>
            </div>
        </div>
    </div>
</body>
</html>